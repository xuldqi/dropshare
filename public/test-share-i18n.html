<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Share Page i18n Test - DropShare</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .language-selector {
            margin: 20px 0;
        }
        .translation-test {
            margin: 10px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
        }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>Share Page i18n Test</h1>
    
                    <div class="language-selector">
                    <label for="lang-select">é€‰æ‹©è¯­è¨€:</label>
                    <select id="lang-select">
                        <option value="en">English</option>
                        <option value="zh">ä¸­æ–‡ç®€ä½“</option>
                        <option value="zh-tw">ä¸­æ–‡ç¹é«”</option>
                        <option value="fr">FranÃ§ais</option>
                        <option value="de">Deutsch</option>
                        <option value="es">EspaÃ±ol</option>
                        <option value="pt">PortuguÃªs</option>
                        <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                        <option value="ja">æ—¥æœ¬èª</option>
                        <option value="ko">í•œêµ­ì–´</option>
                    </select>
                </div>

    <div class="test-section">
        <h2>ç¿»è¯‘æµ‹è¯•</h2>
        <div class="translation-test">
            <strong>æˆ¿é—´æ ‡é¢˜:</strong> <span data-i18n="room_title">å¤šäººå…±äº«æˆ¿é—´</span>
        </div>
        <div class="translation-test">
            <strong>æˆ¿é—´å‰¯æ ‡é¢˜:</strong> <span data-i18n="room_subtitle">ä¸åŒç½‘ç»œç”¨æˆ·æˆ–é€šè¿‡æˆ¿é—´ç ä¸è¿œç¨‹ç”¨æˆ·å¿«é€Ÿå…±äº«æ–‡ä»¶</span>
        </div>
        <div class="translation-test">
            <strong>åˆ›å»ºæˆ¿é—´æŒ‰é’®:</strong> <span data-i18n="create_room_btn">åˆ›å»ºæˆ¿é—´</span>
        </div>
        <div class="translation-test">
            <strong>åŠ å…¥æˆ¿é—´æŒ‰é’®:</strong> <span data-i18n="join_room_btn">åŠ å…¥æˆ¿é—´</span>
        </div>
        <div class="translation-test">
            <strong>æˆ¿é—´åç§°æ ‡ç­¾:</strong> <span data-i18n="room_name_label">æˆ¿é—´åç§°</span>
        </div>
        <div class="translation-test">
            <strong>æˆ¿é—´å¯†ç æ ‡ç­¾:</strong> <span data-i18n="room_password_label">æˆ¿é—´å¯†ç  (å¯é€‰)</span>
        </div>
        <div class="translation-test">
            <strong>æœ€å¤§æˆå‘˜æ•°æ ‡ç­¾:</strong> <span data-i18n="max_members_label">æœ€å¤§æˆå‘˜æ•°</span>
        </div>
        <div class="translation-test">
            <strong>ç¡®è®¤åˆ›å»ºæˆ¿é—´:</strong> <span data-i18n="confirm_create_room">åˆ›å»ºæˆ¿é—´</span>
        </div>
        <div class="translation-test">
            <strong>å–æ¶ˆåˆ›å»ºæˆ¿é—´:</strong> <span data-i18n="cancel_create_room">å–æ¶ˆ</span>
        </div>
        <div class="translation-test">
            <strong>åŠ å…¥æˆ¿é—´æ ‡é¢˜:</strong> <span data-i18n="join_room_title">åŠ å…¥æˆ¿é—´</span>
        </div>
        <div class="translation-test">
            <strong>æˆ¿é—´ç æ ‡ç­¾:</strong> <span data-i18n="room_code_label">æˆ¿é—´ç </span>
        </div>
        <div class="translation-test">
            <strong>åŠ å…¥å¯†ç æ ‡ç­¾:</strong> <span data-i18n="join_password_label">æˆ¿é—´å¯†ç  (å¦‚æœéœ€è¦)</span>
        </div>
        <div class="translation-test">
            <strong>ç¡®è®¤åŠ å…¥æˆ¿é—´:</strong> <span data-i18n="confirm_join_room">åŠ å…¥æˆ¿é—´</span>
        </div>
        <div class="translation-test">
            <strong>å–æ¶ˆåŠ å…¥æˆ¿é—´:</strong> <span data-i18n="cancel_join_room">å–æ¶ˆ</span>
        </div>
        <div class="translation-test">
            <strong>å¤åˆ¶æˆ¿é—´ç :</strong> <span data-i18n="copy_room_code">å¤åˆ¶æˆ¿é—´ç </span>
        </div>
        <div class="translation-test">
            <strong>æ‚¨çš„åç§°æ ‡ç­¾:</strong> <span data-i18n="your_name_label">æ‚¨çš„åç§°ï¼š</span>
        </div>
        <div class="translation-test">
            <strong>æˆå‘˜åœ¨çº¿:</strong> <span data-i18n="members_online">äººåœ¨çº¿</span>
        </div>
        <div class="translation-test">
            <strong>æˆ¿é—´æˆå‘˜æ ‡ç­¾:</strong> <span data-i18n="room_members_label">æˆ¿é—´æˆå‘˜:</span>
        </div>
        <div class="translation-test">
            <strong>é€€å‡ºæˆ¿é—´æŒ‰é’®:</strong> <span data-i18n="leave_room_btn">é€€å‡ºæˆ¿é—´</span>
        </div>
        <div class="translation-test">
            <strong>ä¸Šä¼ æ–‡ä»¶åˆ°æˆ¿é—´:</strong> <span data-i18n="upload_files_to_room">ğŸ“¤ ä¸Šä¼ æ–‡ä»¶åˆ°æˆ¿é—´</span>
        </div>
        <div class="translation-test">
            <strong>æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œ:</strong> <span data-i18n="drag_files_here">æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œæˆ–ç‚¹å‡»ä¸Šä¼ </span>
        </div>
        <div class="translation-test">
            <strong>æ–‡ä»¶å…±äº«ç»™æ‰€æœ‰æˆå‘˜:</strong> <span data-i18n="files_shared_to_all">æ–‡ä»¶å°†å…±äº«ç»™æˆ¿é—´å†…çš„æ‰€æœ‰æˆå‘˜</span>
        </div>
        <div class="translation-test">
            <strong>é€‰æ‹©æ–‡ä»¶ä¸Šä¼ :</strong> <span data-i18n="select_files_upload">é€‰æ‹©æ–‡ä»¶ä¸Šä¼ </span>
        </div>
        <div class="translation-test">
            <strong>æˆ¿é—´å…±äº«æ–‡ä»¶:</strong> <span data-i18n="room_shared_files">ğŸ“ æˆ¿é—´å…±äº«æ–‡ä»¶</span>
        </div>
        <div class="translation-test">
            <strong>æ–‡ä»¶æ•°é‡:</strong> <span data-i18n="files_count">ä¸ªæ–‡ä»¶</span>
        </div>
        <div class="translation-test">
            <strong>æš‚æ— å…±äº«æ–‡ä»¶:</strong> <span data-i18n="no_shared_files">æˆ¿é—´å†…æš‚æ— å…±äº«æ–‡ä»¶</span>
        </div>
        <div class="translation-test">
            <strong>ä¸Šä¼ æç¤º:</strong> <span data-i18n="upload_hint">ä¸Šä¼ æ–‡ä»¶åï¼Œæˆ¿é—´å†…æ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥ä¸‹è½½</span>
        </div>
    </div>

    <div class="test-section">
        <h2>ç³»ç»ŸçŠ¶æ€</h2>
        <div id="status"></div>
    </div>

    <!-- Load the language loader first -->
    <script src="scripts/i18n/languages.js"></script>
    
    <script>
        // ç­‰å¾…è¯­è¨€ç³»ç»ŸåŠ è½½
        function waitForLanguages() {
            if (window.LANGUAGES && window.DROPSHARE_I18N) {
                initializeTest();
            } else {
                setTimeout(waitForLanguages, 100);
            }
        }

        function initializeTest() {
            console.log('è¯­è¨€ç³»ç»Ÿå·²åŠ è½½');
            
            // è®¾ç½®è¯­è¨€é€‰æ‹©å™¨
            const langSelect = document.getElementById('lang-select');
            langSelect.value = window.DROPSHARE_I18N.getCurrentLanguage();
            
            langSelect.addEventListener('change', function(e) {
                const newLang = e.target.value;
                console.log('åˆ‡æ¢è¯­è¨€åˆ°:', newLang);
                window.DROPSHARE_I18N.changeLanguage(newLang);
                updateStatus();
            });

            // åº”ç”¨ç¿»è¯‘
            applyTranslations();
            updateStatus();
        }

        function applyTranslations() {
            const elements = document.querySelectorAll('[data-i18n]');
            console.log(`æ‰¾åˆ° ${elements.length} ä¸ªéœ€è¦ç¿»è¯‘çš„å…ƒç´ `);
            
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                const translation = window.DROPSHARE_I18N.getText(key);
                if (translation) {
                    element.textContent = translation;
                    console.log(`ç¿»è¯‘ "${key}" -> "${translation}"`);
                } else {
                    console.warn(`æœªæ‰¾åˆ°ç¿»è¯‘é”®: ${key}`);
                    element.style.color = 'red';
                }
            });
        }

        function updateStatus() {
            const statusDiv = document.getElementById('status');
            const currentLang = window.DROPSHARE_I18N.getCurrentLanguage();
            const langInfo = window.LANGUAGES[currentLang];
            
            let html = '<p><strong>å½“å‰è¯­è¨€:</strong> ' + currentLang + '</p>';
            html += '<p><strong>è¯­è¨€åç§°:</strong> ' + (langInfo ? langInfo.name : 'æœªçŸ¥') + '</p>';
            html += '<p><strong>ç¿»è¯‘é”®æ€»æ•°:</strong> ' + (langInfo ? Object.keys(langInfo.translations).length : 0) + '</p>';
            
            // æ£€æŸ¥å…³é”®ç¿»è¯‘é”®
            const keyChecks = [
                'room_title', 'room_subtitle', 'create_room_btn', 'join_room_btn',
                'room_name_label', 'room_password_label', 'max_members_label'
            ];
            
            html += '<p><strong>å…³é”®ç¿»è¯‘é”®æ£€æŸ¥:</strong></p>';
            keyChecks.forEach(key => {
                const translation = window.DROPSHARE_I18N.getText(key);
                const status = translation ? 'âœ…' : 'âŒ';
                html += `<p>${status} ${key}: ${translation || 'æœªæ‰¾åˆ°'}</p>`;
            });
            
            statusDiv.innerHTML = html;
        }

        // å¯åŠ¨æµ‹è¯•
        waitForLanguages();
    </script>
</body>
</html>
