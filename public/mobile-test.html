<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§»åŠ¨ç«¯æµ‹è¯• - DropShare</title>
    
    <!-- Mobile Responsive Styles -->
    <link rel="stylesheet" href="styles/mobile-responsive.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }
        
        .test-container {
            max-width: 800px;
            margin: 80px auto 40px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        
        .test-title {
            color: #1f2937;
            border-bottom: 2px solid #3367d6;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            align-items: center;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-list li::before {
            content: "âœ…";
            margin-right: 12px;
            font-size: 16px;
        }
        
        .test-button {
            background: #3367d6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 8px;
            font-size: 16px;
            min-height: 44px;
            transition: background-color 0.2s;
        }
        
        .test-button:hover {
            background: #2563eb;
        }
        
        .test-button:active {
            background: #1d4ed8;
        }
        
        .info-box {
            background: #dbeafe;
            border: 1px solid #3367d6;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .info-box h4 {
            margin: 0 0 8px 0;
            color: #1e40af;
        }
        
        .device-info {
            background: #f9fafb;
            padding: 16px;
            border-radius: 6px;
            margin: 16px 0;
            font-family: monospace;
            font-size: 14px;
        }
        
        .gesture-demo {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 16px 0;
        }
        
        /* åˆ›å»ºè™šå‡çš„headerç”¨äºæµ‹è¯• */
        .fake-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #e5e7eb;
            z-index: 1000;
            padding: 12px 0;
            height: 60px;
            box-sizing: border-box;
        }
        
        .fake-header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }
        
        .fake-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 20px;
            font-weight: bold;
            color: #3367d6;
        }
        
        .fake-nav {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        .fake-nav a {
            color: #4b5563;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .fake-nav a:hover {
            background: #f3f4f6;
            color: #3367d6;
        }
        
        .fake-lang-selector select {
            padding: 6px 12px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            background: white;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- è™šå‡çš„headerç”¨äºæµ‹è¯•ç§»åŠ¨ç«¯å¯¼èˆª -->
    <header class="fake-header">
        <div class="fake-header-container">
            <div class="fake-logo">
                ğŸ“± DropShareç§»åŠ¨ç«¯æµ‹è¯•
            </div>
            <nav class="fake-nav nav-links">
                <a href="#transfer">Transfer</a>
                <a href="#rooms">Rooms</a>
                <a href="#images">Images</a>
                <a href="#audio">Audio</a>
                <a href="#video">Video</a>
                <a href="#files">Files</a>
            </nav>
            <div class="fake-lang-selector">
                
            </div>
        </div>
    </header>

    <div class="test-container">
        <h1>ğŸ“± DropShare ç§»åŠ¨ç«¯åŠŸèƒ½æµ‹è¯•</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•DropShareçš„ç§»åŠ¨ç«¯å“åº”å¼è®¾è®¡å’Œäº¤äº’åŠŸèƒ½ã€‚</p>

        <div class="test-section">
            <h2 class="test-title">ğŸ¯ ç§»åŠ¨ç«¯åŠŸèƒ½ç‰¹æ€§</h2>
            <ul class="feature-list">
                <li>å“åº”å¼å¸ƒå±€é€‚é…å„ç§å±å¹•å°ºå¯¸</li>
                <li>æ±‰å ¡èœå•å¯¼èˆªï¼ˆ768pxä»¥ä¸‹æ˜¾ç¤ºï¼‰</li>
                <li>è§¦æ‘¸ä¼˜åŒ–çš„æŒ‰é’®å’Œäº¤äº’å…ƒç´ </li>
                <li>æ»‘åŠ¨æ‰‹åŠ¿æ”¯æŒï¼ˆå³æ»‘å¼€èœå•ï¼Œå·¦æ»‘å…³èœå•ï¼‰</li>
                <li>ç§»åŠ¨ç«¯ä¸“ç”¨è¯­è¨€é€‰æ‹©å™¨</li>
                <li>44pxæœ€å°è§¦æ‘¸ç›®æ ‡å°ºå¯¸</li>
                <li>iOS Safariæ»šåŠ¨ä¼˜åŒ–</li>
                <li>é˜²æ­¢é¡µé¢æ»šåŠ¨ç©¿é€</li>
                <li>ç§»åŠ¨ç«¯ç‰¹å®šçš„Analyticsç»Ÿè®¡</li>
                <li>æ¨ªå±å’Œç«–å±è‡ªé€‚åº”</li>
            </ul>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ”§ åŠŸèƒ½æµ‹è¯•</h2>
            <div class="info-box">
                <h4>æ±‰å ¡èœå•æµ‹è¯•</h4>
                <p>åœ¨ç§»åŠ¨ç«¯ï¼ˆå®½åº¦â‰¤768pxï¼‰è®¿é—®æ­¤é¡µé¢ï¼Œå³ä¸Šè§’ä¼šæ˜¾ç¤ºæ±‰å ¡èœå•æŒ‰é’®ã€‚ç‚¹å‡»å¯æ‰“å¼€/å…³é—­å¯¼èˆªèœå•ã€‚</p>
            </div>
            
            <button class="test-button" onclick="testMobileMenu()">æµ‹è¯•ç§»åŠ¨èœå•çŠ¶æ€</button>
            <button class="test-button" onclick="testScreenSize()">æ£€æŸ¥å±å¹•å°ºå¯¸</button>
            <button class="test-button" onclick="testTouchSupport()">æµ‹è¯•è§¦æ‘¸æ”¯æŒ</button>
            <button class="test-button" onclick="testMobileFeatures()">æµ‹è¯•æ‰€æœ‰ç§»åŠ¨ç‰¹æ€§</button>
            
            <div class="gesture-demo">
                <h3>ğŸ–ï¸ æ‰‹åŠ¿æ“ä½œæµ‹è¯•åŒºåŸŸ</h3>
                <p>åœ¨æ­¤åŒºåŸŸå³æ»‘å¯æ‰“å¼€èœå•ï¼Œå·¦æ»‘å¯å…³é—­èœå•</p>
                <p>ï¼ˆéœ€è¦åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæµ‹è¯•ï¼‰</p>
            </div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ“± è®¾å¤‡ä¿¡æ¯</h2>
            <div class="device-info" id="device-info">æ­£åœ¨åŠ è½½è®¾å¤‡ä¿¡æ¯...</div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ” æ–­ç‚¹æµ‹è¯•</h2>
            <div class="info-box">
                <h4>å“åº”å¼æ–­ç‚¹</h4>
                <ul>
                    <li><strong>â‰¤480px:</strong> å°å±æ‰‹æœºä¼˜åŒ–</li>
                    <li><strong>â‰¤768px:</strong> æ‰‹æœºç«¯ï¼Œæ˜¾ç¤ºæ±‰å ¡èœå•</li>
                    <li><strong>769-1024px:</strong> å¹³æ¿ç«¯</li>
                    <li><strong>>1024px:</strong> æ¡Œé¢ç«¯</li>
                </ul>
            </div>
            
            <div id="current-breakpoint" class="device-info">å½“å‰æ–­ç‚¹: æ£€æµ‹ä¸­...</div>
        </div>

        <div class="test-section">
            <h2 class="test-title">ğŸ“Š æµ‹è¯•ç»“æœ</h2>
            <div id="test-results" class="device-info">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹æµ‹è¯•ç»“æœ</div>
        </div>
    </div>

    <!-- Firebase SDK (å¯é€‰) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-analytics-compat.js"></script>
    
    <!-- Firebase Analytics Configuration -->
    <script src="scripts/firebase-analytics.js"></script>
    <script src="scripts/analytics-enhanced.js"></script>
    
    <!-- Mobile Navigation and Touch Optimization -->
    <script src="scripts/mobile-navigation.js"></script>

    <script>
        // æµ‹è¯•å‡½æ•°
        function testMobileMenu() {
            const results = document.getElementById('test-results');
            let info = '';
            
            if (window.mobileNav) {
                const status = window.mobileNav.getStatus();
                info += `ç§»åŠ¨å¯¼èˆªçŠ¶æ€:\n`;
                info += `- æ˜¯å¦ç§»åŠ¨ç«¯: ${status.isMobile}\n`;
                info += `- èœå•æ˜¯å¦æ‰“å¼€: ${status.isMenuOpen}\n`;
                info += `- å±å¹•å°ºå¯¸: ${status.screenWidth}x${status.screenHeight}\n`;
                info += `- æ±‰å ¡èœå•å…ƒç´ : ${document.getElementById('mobile-menu-toggle') ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\n`;
                info += `- ç§»åŠ¨èœå•å…ƒç´ : ${document.getElementById('mobile-nav') ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}\n`;
            } else {
                info = 'ç§»åŠ¨å¯¼èˆªç®¡ç†å™¨æœªåˆå§‹åŒ–';
            }
            
            results.textContent = info;
        }

        function testScreenSize() {
            const results = document.getElementById('test-results');
            const width = window.innerWidth;
            const height = window.innerHeight;
            const ratio = window.devicePixelRatio || 1;
            
            let breakpoint = '';
            if (width <= 480) breakpoint = 'å°å±æ‰‹æœº';
            else if (width <= 768) breakpoint = 'æ‰‹æœºç«¯';
            else if (width <= 1024) breakpoint = 'å¹³æ¿ç«¯';
            else breakpoint = 'æ¡Œé¢ç«¯';
            
            const info = `å±å¹•å°ºå¯¸æµ‹è¯•:\n` +
                        `- è§†çª—å°ºå¯¸: ${width}x${height}\n` +
                        `- è®¾å¤‡åƒç´ æ¯”: ${ratio}\n` +
                        `- å½“å‰æ–­ç‚¹: ${breakpoint}\n` +
                        `- æ–¹å‘: ${width > height ? 'æ¨ªå±' : 'ç«–å±'}`;
            
            results.textContent = info;
        }

        function testTouchSupport() {
            const results = document.getElementById('test-results');
            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            const hasTouchOptimizer = !!window.mobileTouchOptimizer;
            
            const info = `è§¦æ‘¸æ”¯æŒæµ‹è¯•:\n` +
                        `- è®¾å¤‡æ”¯æŒè§¦æ‘¸: ${hasTouch}\n` +
                        `- è§¦æ‘¸ä¼˜åŒ–å™¨: ${hasTouchOptimizer ? 'å·²åŠ è½½' : 'æœªåŠ è½½'}\n` +
                        `- æœ€å¤§è§¦æ‘¸ç‚¹: ${navigator.maxTouchPoints || 'æœªçŸ¥'}\n` +
                        `- ç”¨æˆ·ä»£ç†: ${navigator.userAgent.substring(0, 60)}...`;
            
            results.textContent = info;
        }

        function testMobileFeatures() {
            const results = document.getElementById('test-results');
            const features = [];
            
            // æ£€æŸ¥å„ç§ç§»åŠ¨ç«¯åŠŸèƒ½
            features.push(`CSSå˜é‡æ”¯æŒ: ${CSS.supports('color', 'var(--test)') ? 'âœ…' : 'âŒ'}`);
            features.push(`Flexboxæ”¯æŒ: ${CSS.supports('display', 'flex') ? 'âœ…' : 'âŒ'}`);
            features.push(`Gridæ”¯æŒ: ${CSS.supports('display', 'grid') ? 'âœ…' : 'âŒ'}`);
            features.push(`ç§»åŠ¨å¯¼èˆª: ${window.mobileNav ? 'âœ…' : 'âŒ'}`);
            features.push(`è§¦æ‘¸ä¼˜åŒ–: ${window.mobileTouchOptimizer ? 'âœ…' : 'âŒ'}`);
            features.push(`Firebase Analytics: ${window.firebaseAnalytics ? 'âœ…' : 'âŒ'}`);
            features.push(`æœ¬åœ°å­˜å‚¨: ${typeof localStorage !== 'undefined' ? 'âœ…' : 'âŒ'}`);
            features.push(`Service Worker: ${'serviceWorker' in navigator ? 'âœ…' : 'âŒ'}`);
            
            results.textContent = 'ç§»åŠ¨ç«¯åŠŸèƒ½æ£€æµ‹:\n' + features.join('\n');
        }

        // æ›´æ–°è®¾å¤‡ä¿¡æ¯
        function updateDeviceInfo() {
            const deviceInfo = document.getElementById('device-info');
            const currentBreakpoint = document.getElementById('current-breakpoint');
            
            const info = {
                userAgent: navigator.userAgent.substring(0, 80) + '...',
                platform: navigator.platform,
                language: navigator.language,
                languages: navigator.languages?.slice(0, 3).join(', ') || 'æœªçŸ¥',
                screen: `${screen.width}x${screen.height}`,
                viewport: `${window.innerWidth}x${window.innerHeight}`,
                pixelRatio: window.devicePixelRatio || 1,
                colorDepth: screen.colorDepth,
                orientation: screen.orientation?.type || 'æœªçŸ¥',
                connection: navigator.connection?.effectiveType || 'æœªçŸ¥',
                memory: navigator.deviceMemory ? navigator.deviceMemory + 'GB' : 'æœªçŸ¥',
                hardwareConcurrency: navigator.hardwareConcurrency || 'æœªçŸ¥'
            };
            
            deviceInfo.innerHTML = Object.entries(info)
                .map(([key, value]) => `<strong>${key}:</strong> ${value}`)
                .join('<br>');
            
            // æ›´æ–°å½“å‰æ–­ç‚¹
            const width = window.innerWidth;
            let breakpoint = '';
            if (width <= 480) breakpoint = 'å°å±æ‰‹æœº (â‰¤480px)';
            else if (width <= 768) breakpoint = 'æ‰‹æœºç«¯ (â‰¤768px)';
            else if (width <= 1024) breakpoint = 'å¹³æ¿ç«¯ (769-1024px)';
            else breakpoint = 'æ¡Œé¢ç«¯ (>1024px)';
            
            currentBreakpoint.textContent = `å½“å‰æ–­ç‚¹: ${breakpoint} | è§†çª—: ${width}x${window.innerHeight}`;
        }

        // é¡µé¢åŠ è½½å’Œçª—å£å¤§å°å˜åŒ–æ—¶æ›´æ–°ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', updateDeviceInfo);
        window.addEventListener('resize', updateDeviceInfo);
        window.addEventListener('orientationchange', () => {
            setTimeout(updateDeviceInfo, 100);
        });

        // è®°å½•é¡µé¢è®¿é—®
        if (window.analyticsEnhanced) {
            setTimeout(() => {
                window.analyticsEnhanced.trackEvent('mobile_test_page_visit', {
                    screen_width: window.innerWidth,
                    screen_height: window.innerHeight,
                    is_mobile: window.innerWidth <= 768,
                    user_agent: navigator.userAgent.substring(0, 100)
                });
            }, 1000);
        }
    </script>
</body>
</html>