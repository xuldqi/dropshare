<!DOCTYPE html>
<html>
<head>
    <title>FFmpeg ColleTools Test</title>
</head>
<body>
    <h1>FFmpeg ColleTools Implementation Test</h1>
    <div id="status">Initializing...</div>
    <button id="testBtn" onclick="testFFmpeg()">Test FFmpeg Loading</button>
    <div id="results"></div>

    <script src="/js/ffmpeg-working.js"></script>
    <script>
        async function testFFmpeg() {
            const statusEl = document.getElementById('status');
            const resultsEl = document.getElementById('results');
            
            try {
                statusEl.textContent = 'Loading FFmpeg...';
                
                console.log('Starting FFmpeg test...');
                const ffmpeg = await loadFFmpegColleTools();
                
                statusEl.textContent = '✅ FFmpeg loaded successfully!';
                
                resultsEl.innerHTML = `
                    <h3>Test Results:</h3>
                    <p>✅ FFmpeg instance created</p>
                    <p>✅ Using ColleTools method</p>
                    <p>✅ window.FFmpegWASM available: ${typeof window.FFmpegWASM !== 'undefined'}</p>
                    <p>✅ FFmpeg object: ${ffmpeg ? 'Created' : 'Failed'}</p>
                `;
                
            } catch (error) {
                statusEl.textContent = '❌ FFmpeg loading failed';
                resultsEl.innerHTML = `
                    <h3>Error:</h3>
                    <p style="color: red">${error.message}</p>
                `;
                console.error('FFmpeg test failed:', error);
            }
        }
        
        // Auto-test on page load
        window.addEventListener('load', testFFmpeg);
    </script>
</body>
</html>