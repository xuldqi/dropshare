# 双版本主题切换实现方案

本方案通过创建每个页面的浅色版本和深色版本，实现主题切换功能。在用户切换主题时，通过URL重定向到对应版本的页面，而不是动态修改DOM，这可以提供更好的性能和用户体验。

## 实现细节

### 1. 文件结构

- 原始页面保持不变（如 `index.html`, `about.html` 等）
- 深色版本：
  - 首页位于 `/dark/index.html`
  - 其他页面使用 `-dark` 后缀（如 `about-dark.html`）
- 浅色版本：
  - 首页位于 `/light/index.html`
  - 其他页面使用 `-light` 后缀（如 `about-light.html`）

### 2. 关键组件

1. **主题重定向脚本** (`public/scripts/theme-redirect.js`)：
   - 检测用户的主题偏好（从localStorage或系统设置）
   - 在切换主题时，重定向到对应版本的页面
   - 页面加载时自动检查并重定向到正确的主题版本

2. **构建脚本** (`build-theme-versions.js`)：
   - 使用Node.js和jsdom生成所有页面的深色版和浅色版
   - 为生成的页面添加正确的主题类和图标
   - 更新页面内的链接，确保它们指向对应主题的页面

3. **服务器路由** (`index.js`)：
   - 添加特殊路由处理 `/dark/` 和 `/light/` 目录
   - 处理带有 `-dark` 和 `-light` 后缀的页面请求

### 3. 使用方法

1. 安装依赖：
   ```
   npm install
   ```

2. 生成主题版本页面：
   ```
   npm run build-themes
   ```

3. 启动服务器：
   ```
   npm start
   ```

4. 访问网站，主题切换按钮将自动重定向到对应主题的页面。

### 4. 优势

- 更好的性能：不需要在运行时动态修改DOM
- 更好的SEO：搜索引擎可以索引两个版本的页面
- 更好的用户体验：页面加载时已经应用了正确的主题，不会有闪烁
- 可以为不同主题版本单独优化样式和内容

### 5. 注意事项

- 每次更新网站内容后，需要重新运行 `npm run build-themes` 生成新的主题版本
- 确保所有内部链接都正确指向对应主题的页面
- 确保服务器正确配置以处理主题版本的路由 