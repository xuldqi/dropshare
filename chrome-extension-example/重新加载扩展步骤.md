# 重新加载Chrome扩展步骤

## 方法1: 在扩展管理页面重新加载（推荐）

1. **打开扩展管理页面**
   - 在Chrome地址栏输入：`chrome://extensions/`
   - 或者：菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**
   - 确保右上角的"开发者模式"开关已打开（蓝色）

3. **找到DropShare扩展**
   - 在扩展列表中找到"DropShare Extension"

4. **重新加载扩展**
   - 点击扩展卡片右下角的"刷新"按钮（🔄图标）
   - 或者点击扩展卡片上的"重新加载"链接

5. **验证重新加载**
   - 查看Service Worker状态，应该显示"Service Worker"链接（表示已加载）
   - 点击"Service Worker"查看控制台，确认没有错误

## 方法2: 移除后重新添加

如果方法1不起作用：

1. **移除扩展**
   - 在扩展管理页面，找到DropShare扩展
   - 点击"移除"按钮
   - 确认移除

2. **重新加载扩展**
   - 点击"加载已解压的扩展程序"
   - 选择 `chrome-extension-example` 文件夹
   - 点击"选择"

3. **验证安装**
   - 扩展应该重新出现在列表中
   - 点击扩展图标，查看是否能正常打开popup

## 方法3: 重新加载Service Worker（仅Service Worker更改）

如果只修改了 `background.js`：

1. **打开Service Worker**
   - 在扩展管理页面，找到DropShare扩展
   - 点击"Service Worker"链接（或"service worker"文本）

2. **重新加载**
   - 在打开的开发者工具中，点击"重新加载"按钮（🔄）
   - 或者关闭开发者工具，然后在扩展管理页面点击扩展的刷新按钮

## 验证重新加载是否成功

### 检查1: Service Worker状态
- 打开 `chrome://extensions/`
- 找到DropShare扩展
- 查看Service Worker状态：
  - ✅ "Service Worker"链接（蓝色，可点击）→ 已加载
  - ❌ "错误"或"已停止" → 需要检查错误

### 检查2: 查看日志
1. 点击"Service Worker"链接
2. 查看Console标签页
3. 应该看到：
   - `DropShare Extension initialized`
   - `✅ Connected to signaling server`（如果服务器可用）
   - 没有红色错误信息

### 检查3: 测试功能
1. 点击扩展图标
2. 打开popup界面
3. 查看状态：
   - 应该显示连接状态
   - 应该显示设备列表
   - 应该可以正常使用

## 常见问题

### Q: 重新加载后还是旧的代码？
A: 
1. 检查文件是否已保存
2. 清除浏览器缓存
3. 尝试方法2（移除后重新添加）
4. 检查是否有语法错误（查看Service Worker日志）

### Q: Service Worker无法加载？
A: 
1. 检查 `background.js` 是否有语法错误
2. 查看Service Worker日志中的错误信息
3. 检查 `manifest.json` 配置是否正确
4. 尝试方法2（移除后重新添加）

### Q: 重新加载后扩展不工作？
A: 
1. 查看Service Worker日志
2. 检查控制台错误
3. 确认服务器地址配置正确
4. 检查网络连接

## 快速重新加载命令

如果经常需要重新加载，可以：
1. 将扩展管理页面添加到书签
2. 使用快捷键：`Ctrl+Shift+E`（Windows/Linux）或 `Cmd+Shift+E`（Mac）
3. 直接在地址栏输入 `chrome://extensions/`

## 开发建议

在开发过程中：
1. **每次修改代码后**：重新加载扩展
2. **修改manifest.json后**：必须重新加载扩展
3. **修改background.js后**：重新加载Service Worker
4. **修改popup.html/js后**：重新打开popup即可看到更改


