# 快速配置线上服务器

## 🚀 3步配置

### 步骤1: 打开设置
1. 点击Chrome工具栏中的DropShare扩展图标
2. 点击右上角的 **"⚙️ 设置"** 按钮

### 步骤2: 输入服务器地址
在"服务器地址"输入框中输入你的服务器地址：

**格式：**
- HTTPS服务器: `wss://你的域名/server/webrtc`
- HTTP服务器: `ws://你的域名:端口/server/webrtc`

**示例：**
```
wss://dropshare.tech/server/webrtc
ws://192.168.1.100:8080/server/webrtc
wss://your-domain.com/server/webrtc
```

### 步骤3: 保存
1. 点击 **"保存"** 按钮
2. 等待几秒钟，状态应该变为"已连接到服务器"

## 📝 如何确定你的服务器地址？

### 如果你有域名
如果你的DropShare网站是：`https://dropshare.tech`

那么WebSocket地址就是：
```
wss://dropshare.tech/server/webrtc
```

### 如果你有IP地址
如果你的服务器IP是：`123.456.789.0`，端口是 `8080`

那么WebSocket地址就是：
```
ws://123.456.789.0:8080/server/webrtc
```

### 本地开发
如果是本地测试：
```
ws://localhost:8080/server/webrtc
```

## ⚠️ 重要提示

1. **协议选择**
   - 网站是 `https://` → 使用 `wss://`
   - 网站是 `http://` → 使用 `ws://`

2. **路径必须包含**
   - 地址末尾必须是 `/server/webrtc`
   - 这是DropShare服务器的WebSocket端点

3. **端口号**
   - HTTPS默认443（通常省略）
   - HTTP默认80（通常省略）
   - 自定义端口需要明确指定

## ✅ 验证配置

配置后检查：
1. 状态栏显示"已连接到服务器"（绿色）
2. 设备列表显示其他在线设备
3. 如果显示"与服务器断开连接"（红色），检查：
   - 服务器地址是否正确
   - 服务器是否正在运行
   - 网络连接是否正常

## 🔍 故障排除

### 连接失败？
1. **检查服务器地址格式**
   - ✅ 正确: `wss://dropshare.tech/server/webrtc`
   - ❌ 错误: `wss://dropshare.tech` (缺少路径)
   - ❌ 错误: `https://dropshare.tech/server/webrtc` (应该用wss://)

2. **检查服务器状态**
   - 确保DropShare服务器正在运行
   - 检查服务器日志是否有错误

3. **检查网络**
   - 确保可以访问服务器
   - 检查防火墙设置
   - 检查WebSocket端口是否开放

4. **查看日志**
   - 打开 `chrome://extensions/`
   - 找到DropShare扩展
   - 点击"service worker"
   - 查看Console标签页的错误信息

## 💡 提示

- 设置会保存在Chrome中，下次打开扩展会自动使用
- 可以在设置中随时修改服务器地址
- 修改后会自动重新连接


